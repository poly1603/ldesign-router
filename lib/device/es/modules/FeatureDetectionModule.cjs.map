{"version":3,"file":"FeatureDetectionModule.cjs","sources":["../../../../../device/es/modules/FeatureDetectionModule.js"],"sourcesContent":["/*!\n * ***********************************\n * @ldesign/device v0.1.0          *\n * Built with rollup               *\n * Build time: 2024-10-21 14:32:55 *\n * Build mode: production          *\n * Minified: No                    *\n * ***********************************\n */\nimport { EventEmitter } from '../core/EventEmitter.js';\n\nclass FeatureDetectionModule extends EventEmitter {\n  constructor() {\n    super(...arguments);\n    this.name = \"feature\";\n    this.features = null;\n    this.mediaQueryListeners = /* @__PURE__ */ new Map();\n    this.isInitialized = false;\n  }\n  /**\n   * 初始化模块\n   */\n  async init() {\n    if (this.isInitialized) return;\n    this.features = await this.detectFeatures();\n    this.setupMediaQueryListeners();\n    this.isInitialized = true;\n  }\n  /**\n   * 获取特性检测数据\n   */\n  getData() {\n    if (!this.features) {\n      throw new Error(\"FeatureDetectionModule not initialized\");\n    }\n    return {\n      ...this.features\n    };\n  }\n  /**\n   * 检查是否支持暗黑模式\n   */\n  isDarkMode() {\n    return this.features?.preferences.darkMode ?? false;\n  }\n  /**\n   * 检查是否偏好减少动画\n   */\n  prefersReducedMotion() {\n    return this.features?.preferences.reducedMotion ?? false;\n  }\n  /**\n   * 检查是否支持 WebP\n   */\n  supportsWebP() {\n    return this.features?.media.webp ?? false;\n  }\n  /**\n   * 检查是否支持 AVIF\n   */\n  supportsAVIF() {\n    return this.features?.media.avif ?? false;\n  }\n  /**\n   * 获取 CPU 核心数\n   */\n  getCPUCores() {\n    return this.features?.hardware.cpuCores ?? 1;\n  }\n  /**\n   * 获取设备内存（GB）\n   */\n  getDeviceMemory() {\n    return this.features?.hardware.deviceMemory ?? 0;\n  }\n  /**\n   * 销毁模块\n   */\n  async destroy() {\n    this.removeMediaQueryListeners();\n    this.removeAllListeners();\n    this.features = null;\n    this.isInitialized = false;\n  }\n  /**\n   * 检测所有特性\n   */\n  async detectFeatures() {\n    return {\n      storage: this.detectStorage(),\n      media: await this.detectMediaSupport(),\n      css: this.detectCSSFeatures(),\n      apis: this.detectAPIs(),\n      pwa: this.detectPWACapabilities(),\n      sensors: this.detectSensors(),\n      preferences: this.detectPreferences(),\n      capabilities: this.detectCapabilities(),\n      hardware: this.detectHardware()\n    };\n  }\n  /**\n   * 检测存储支持\n   */\n  detectStorage() {\n    return {\n      localStorage: this.checkLocalStorage(),\n      sessionStorage: this.checkSessionStorage(),\n      indexedDB: this.checkIndexedDB(),\n      cookies: this.checkCookies(),\n      cacheAPI: \"caches\" in window,\n      fileSystemAccess: \"showOpenFilePicker\" in window\n    };\n  }\n  /**\n   * 检测媒体格式支持\n   */\n  async detectMediaSupport() {\n    return {\n      webp: await this.checkImageFormat(\"webp\"),\n      avif: await this.checkImageFormat(\"avif\"),\n      jxl: false,\n      // JPEG XL 还没有广泛支持\n      heic: false,\n      // HEIC 主要在 iOS Safari 中支持\n      webm: this.checkVideoFormat(\"video/webm\"),\n      mp4: this.checkVideoFormat(\"video/mp4\"),\n      hls: this.checkHLSSupport()\n    };\n  }\n  /**\n   * 检测 API 支持\n   */\n  detectAPIs() {\n    return {\n      serviceWorker: \"serviceWorker\" in navigator,\n      webWorker: typeof Worker !== \"undefined\",\n      webRTC: \"RTCPeerConnection\" in window,\n      webSocket: \"WebSocket\" in window,\n      webGL: this.checkWebGL(),\n      webGL2: this.checkWebGL2(),\n      webGPU: \"gpu\" in navigator,\n      webAssembly: typeof WebAssembly !== \"undefined\",\n      webXR: \"xr\" in navigator,\n      webAudio: \"AudioContext\" in window || \"webkitAudioContext\" in window,\n      intersectionObserver: \"IntersectionObserver\" in window,\n      resizeObserver: \"ResizeObserver\" in window,\n      mutationObserver: \"MutationObserver\" in window\n    };\n  }\n  /**\n   * 检测传感器支持\n   */\n  detectSensors() {\n    return {\n      accelerometer: \"Accelerometer\" in window,\n      gyroscope: \"Gyroscope\" in window,\n      magnetometer: \"Magnetometer\" in window,\n      ambientLight: \"AmbientLightSensor\" in window\n    };\n  }\n  /**\n   * 检测 CSS 特性支持\n   */\n  detectCSSFeatures() {\n    if (typeof window === \"undefined\" || !CSS || !CSS.supports) {\n      return {\n        grid: false,\n        flexbox: false,\n        cssVariables: false,\n        containerQueries: false,\n        hasSelector: false,\n        subgrid: false\n      };\n    }\n    return {\n      grid: CSS.supports(\"display\", \"grid\"),\n      flexbox: CSS.supports(\"display\", \"flex\"),\n      cssVariables: CSS.supports(\"--test\", \"value\"),\n      containerQueries: CSS.supports(\"container-type\", \"inline-size\"),\n      hasSelector: CSS.supports(\"selector(:has(div))\"),\n      subgrid: CSS.supports(\"grid-template-rows\", \"subgrid\")\n    };\n  }\n  /**\n   * 检测 PWA 能力\n   */\n  detectPWACapabilities() {\n    const pushNotifications = \"PushManager\" in window;\n    const backgroundSync = \"sync\" in (ServiceWorkerRegistration.prototype || {});\n    const periodicBackgroundSync = \"periodicSync\" in (ServiceWorkerRegistration.prototype || {});\n    const installable = \"onbeforeinstallprompt\" in window;\n    return {\n      pushNotifications,\n      backgroundSync,\n      periodicBackgroundSync,\n      installable\n    };\n  }\n  /**\n   * 检测用户偏好\n   */\n  detectPreferences() {\n    return {\n      darkMode: this.checkDarkMode(),\n      reducedMotion: this.checkReducedMotion(),\n      reducedTransparency: this.checkReducedTransparency(),\n      highContrast: this.checkHighContrast()\n    };\n  }\n  /**\n   * 检测设备能力\n   */\n  detectCapabilities() {\n    return {\n      touch: \"ontouchstart\" in window || navigator.maxTouchPoints > 0,\n      pointer: this.detectPointerType(),\n      hover: this.checkHoverCapability(),\n      vibration: \"vibrate\" in navigator,\n      clipboard: \"clipboard\" in navigator,\n      share: \"share\" in navigator,\n      notifications: \"Notification\" in window\n    };\n  }\n  /**\n   * 检测硬件信息\n   */\n  detectHardware() {\n    return {\n      cpuCores: navigator.hardwareConcurrency || 1,\n      deviceMemory: navigator.deviceMemory || 0,\n      maxTouchPoints: navigator.maxTouchPoints || 0\n    };\n  }\n  /**\n   * 检查 LocalStorage 支持\n   */\n  checkLocalStorage() {\n    try {\n      const test = \"__test__\";\n      localStorage.setItem(test, test);\n      localStorage.removeItem(test);\n      return true;\n    } catch {\n      return false;\n    }\n  }\n  /**\n   * 检查 SessionStorage 支持\n   */\n  checkSessionStorage() {\n    try {\n      const test = \"__test__\";\n      sessionStorage.setItem(test, test);\n      sessionStorage.removeItem(test);\n      return true;\n    } catch {\n      return false;\n    }\n  }\n  /**\n   * 检查 IndexedDB 支持\n   */\n  checkIndexedDB() {\n    return \"indexedDB\" in window;\n  }\n  /**\n   * 检查 Cookies 支持\n   */\n  checkCookies() {\n    return navigator.cookieEnabled;\n  }\n  /**\n   * 检查图片格式支持\n   */\n  checkImageFormat(format) {\n    return new Promise((resolve) => {\n      const img = new Image();\n      img.onload = () => resolve(img.width === 1);\n      img.onerror = () => resolve(false);\n      const formats = {\n        webp: \"data:image/webp;base64,UklGRiQAAABXRUJQVlA4IBgAAAAwAQCdASoBAAEAAwA0JaQAA3AA/vuUAAA=\",\n        avif: \"data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A=\"\n      };\n      img.src = formats[format];\n    });\n  }\n  /**\n   * 检查视频格式支持\n   */\n  checkVideoFormat(mimeType) {\n    const video = document.createElement(\"video\");\n    return video.canPlayType(mimeType) !== \"\";\n  }\n  /**\n   * 检查 HLS 支持\n   */\n  checkHLSSupport() {\n    const video = document.createElement(\"video\");\n    return video.canPlayType(\"application/vnd.apple.mpegurl\") !== \"\";\n  }\n  /**\n   * 检查 WebGL 支持\n   */\n  checkWebGL() {\n    try {\n      const canvas = document.createElement(\"canvas\");\n      return !!(canvas.getContext(\"webgl\") || canvas.getContext(\"experimental-webgl\"));\n    } catch {\n      return false;\n    }\n  }\n  /**\n   * 检查 WebGL2 支持\n   */\n  checkWebGL2() {\n    try {\n      const canvas = document.createElement(\"canvas\");\n      return !!canvas.getContext(\"webgl2\");\n    } catch {\n      return false;\n    }\n  }\n  /**\n   * 检查暗黑模式\n   */\n  checkDarkMode() {\n    if (typeof window === \"undefined\") return false;\n    return window.matchMedia(\"(prefers-color-scheme: dark)\").matches;\n  }\n  /**\n   * 检查减少动画偏好\n   */\n  checkReducedMotion() {\n    if (typeof window === \"undefined\") return false;\n    return window.matchMedia(\"(prefers-reduced-motion: reduce)\").matches;\n  }\n  /**\n   * 检查减少透明度偏好\n   */\n  checkReducedTransparency() {\n    if (typeof window === \"undefined\") return false;\n    return window.matchMedia(\"(prefers-reduced-transparency: reduce)\").matches;\n  }\n  /**\n   * 检查高对比度偏好\n   */\n  checkHighContrast() {\n    if (typeof window === \"undefined\") return false;\n    return window.matchMedia(\"(prefers-contrast: high)\").matches;\n  }\n  /**\n   * 检测指针类型\n   */\n  detectPointerType() {\n    if (typeof window === \"undefined\") return \"none\";\n    if (window.matchMedia(\"(pointer: fine)\").matches) return \"fine\";\n    if (window.matchMedia(\"(pointer: coarse)\").matches) return \"coarse\";\n    return \"none\";\n  }\n  /**\n   * 检查悬停能力\n   */\n  checkHoverCapability() {\n    if (typeof window === \"undefined\") return false;\n    return window.matchMedia(\"(hover: hover)\").matches;\n  }\n  /**\n   * 设置媒体查询监听器\n   */\n  setupMediaQueryListeners() {\n    if (typeof window === \"undefined\") return;\n    const darkModeQuery = window.matchMedia(\"(prefers-color-scheme: dark)\");\n    const darkModeHandler = (e) => {\n      if (this.features) {\n        this.features.preferences.darkMode = e.matches;\n        this.emit(\"darkModeChange\", e.matches);\n        this.emit(\"featureChange\", this.features);\n      }\n    };\n    darkModeQuery.addEventListener(\"change\", darkModeHandler);\n    this.mediaQueryListeners.set(\"darkMode\", darkModeQuery);\n    const reducedMotionQuery = window.matchMedia(\"(prefers-reduced-motion: reduce)\");\n    const reducedMotionHandler = (e) => {\n      if (this.features) {\n        this.features.preferences.reducedMotion = e.matches;\n        this.emit(\"reducedMotionChange\", e.matches);\n        this.emit(\"featureChange\", this.features);\n      }\n    };\n    reducedMotionQuery.addEventListener(\"change\", reducedMotionHandler);\n    this.mediaQueryListeners.set(\"reducedMotion\", reducedMotionQuery);\n  }\n  /**\n   * 移除媒体查询监听器\n   */\n  removeMediaQueryListeners() {\n    this.mediaQueryListeners.clear();\n  }\n}\n\nexport { FeatureDetectionModule };\n/*! End of @ldesign/device | Powered by @ldesign/builder */\n//# sourceMappingURL=FeatureDetectionModule.js.map\n"],"names":["FeatureDetectionModule","EventEmitter","constructor","arguments","name","features","mediaQueryListeners","Map","isInitialized","init","detectFeatures","setupMediaQueryListeners","getData","Error","isDarkMode","preferences","darkMode","prefersReducedMotion","reducedMotion","supportsWebP","media","webp","supportsAVIF","avif","getCPUCores","hardware","cpuCores","getDeviceMemory","deviceMemory","destroy","removeMediaQueryListeners","removeAllListeners","storage","detectStorage","detectMediaSupport","css","detectCSSFeatures","apis","detectAPIs","pwa","detectPWACapabilities","sensors","detectSensors","detectPreferences","capabilities","detectCapabilities","detectHardware","localStorage","checkLocalStorage","sessionStorage","checkSessionStorage","indexedDB","checkIndexedDB","cookies","checkCookies","cacheAPI","window","fileSystemAccess","checkImageFormat","jxl","heic","webm","checkVideoFormat","mp4","hls","checkHLSSupport","serviceWorker","navigator","webWorker","Worker","webRTC","webSocket","webGL","checkWebGL","webGL2","checkWebGL2","webGPU","webAssembly","WebAssembly","webXR","webAudio","intersectionObserver","resizeObserver","mutationObserver","accelerometer","gyroscope","magnetometer","ambientLight","CSS","supports","grid","flexbox","cssVariables","containerQueries","hasSelector","subgrid","pushNotifications","backgroundSync","ServiceWorkerRegistration","prototype","periodicBackgroundSync","installable","checkDarkMode","checkReducedMotion","reducedTransparency","checkReducedTransparency","highContrast","checkHighContrast","touch","maxTouchPoints","pointer","detectPointerType","hover","checkHoverCapability","vibration","clipboard","share","notifications","hardwareConcurrency","test","setItem","removeItem","cookieEnabled","format","Promise","resolve","img","Image","onload","width","onerror","formats","src","mimeType","video","document","createElement","canPlayType","canvas","getContext","matchMedia","matches","darkModeQuery","darkModeHandler","e","emit","addEventListener","set","reducedMotionQuery","reducedMotionHandler","clear"],"mappings":"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"}