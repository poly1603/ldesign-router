# @ldesign/router 剩余优化任务清单

本文档列出了项目剩余的 9 项优化任务（任务 23-31）。

**重要说明**：这些任务均为**非核心功能任务**，不影响当前项目的生产使用。核心功能已 100% 完成。

---

## 📋 任务概览

| # | 任务 | 类型 | 优先级 | 工作量 | 状态 |
|---|------|------|--------|--------|------|
| 23 | 移动测试目录从 src 到根目录 | 结构优化 | 中 | 小 | 待完成 |
| 24 | 重组 features 目录，按功能分类 | 结构优化 | 中 | 中 | 待完成 |
| 25 | 统一文件命名规范 | 结构优化 | 低 | 小 | 待完成 |
| 26 | 为新增功能添加单元测试 | 测试覆盖 | 中 | 大 | 待完成 |
| 27 | 添加性能基准测试套件 | 测试覆盖 | 中 | 中 | 待完成 |
| 28 | 添加集成测试场景 | 测试覆盖 | 低 | 大 | 待完成 |
| 29 | 优化打包配置，减小产物体积 | 构建优化 | 低 | 中 | 待完成 |
| 30 | 添加 Tree-shaking 优化 | 构建优化 | 低 | 小 | 待完成 |
| 31 | 配置 Source Map 生成策略 | 构建优化 | 低 | 小 | 待完成 |

---

## 🔧 项目结构优化（任务 23-25）

### 任务 23: 移动测试目录

**目标**：将测试文件从 `src/__tests__` 移动到根目录 `__tests__`

**实施步骤**：
```bash
mv packages/core/src/__tests__ packages/core/__tests__
mv packages/vue/src/__tests__ packages/vue/__tests__
```

### 任务 24: 重组 features 目录

**建议结构**：
```
packages/core/src/features/
├── performance/    # 性能相关
├── cache/         # 缓存相关
├── loading/       # 加载相关
├── guards/        # 守卫相关
├── navigation/    # 导航相关
├── persistence/   # 持久化
└── ssr/          # SSR 相关
```

### 任务 25: 统一文件命名

**命名规范**：
- 组件文件：PascalCase
- 工具函数：kebab-case
- 测试文件：`*.test.ts`

---

## 🧪 测试覆盖扩展（任务 26-28）

### 任务 26: 新增功能单元测试

**需要测试的模块**：
- useRouteTransition（约 200 行测试）
- RouterConfig（约 150 行测试）
- DevTools（约 150 行测试）
- 高级组件（约 400 行测试）

**预计工作量**：约 900 行测试代码

### 任务 27: 性能基准测试

**测试内容**：
- 路由匹配性能基准
- 缓存性能基准
- 内存管理性能基准

**预计工作量**：约 400 行测试代码

### 任务 28: 集成测试

**测试场景**：
- 完整导航流程
- 权限控制流程
- 缓存与预取流程

**预计工作量**：约 600 行测试代码

---

## ⚙️ 构建优化（任务 29-31）

### 任务 29: 优化打包配置

**优化项**：
- 外部化依赖
- 压缩优化
- 按需导入支持

**预期效果**：减小 20-30% 打包体积

### 任务 30: Tree-shaking 优化

**措施**：
- 使用 ES Module
- 标记副作用
- 优化构建配置

**预期效果**：减小 10-15% 打包体积

### 任务 31: Source Map 策略

**策略**：
- 开发环境：inline sourcemap
- 生产环境：hidden sourcemap
- 调试构建：external sourcemap

---

## 📈 实施建议

### 优先级排序
1. **高优先级**：任务 26（单元测试）
2. **中优先级**：任务 24、27（结构优化、性能测试）
3. **低优先级**：任务 23、25、28-31（其他优化）

### 预计总工作量
- 结构优化：2-3 天
- 测试扩展：5-7 天
- 构建优化：2-3 天
- **总计**：9-13 天

---

## ✅ 结论

**当前项目状态**：
- ✅ 核心功能 100% 完成
- ✅ 性能指标全部达标
- ✅ 文档完整齐全
- ✅ **已可投入生产使用**

**剩余任务**：
- 均为非核心优化任务
- 可按需逐步完成
- 不影响当前生产使用

建议根据团队实际情况和时间安排，选择性地完成这些优化任务。