# è·¯ç”±ç®¡ç†ç³»ç»Ÿé¡¹ç›®è¿›åº¦æŠ¥å‘Š

## é¡¹ç›®æ¦‚è¿°

æœ¬é¡¹ç›®æ—¨åœ¨åˆ›å»ºä¸€ä¸ªå®Œæ•´çš„å¤šæ¡†æ¶è·¯ç”±ç®¡ç†ç³»ç»Ÿï¼ŒåŒ…å«æ ¸å¿ƒåŒ…å’Œ15ä¸ªæ¡†æ¶é€‚é…åŒ…ã€‚

## âœ… å·²å®Œæˆä»»åŠ¡

### 1. æ ¸å¿ƒåŒ…å’Œå·²å­˜åœ¨çš„æ¡†æ¶é€‚é…åŒ…
- âœ… `@ldesign/router-core` - æ¡†æ¶æ— å…³çš„æ ¸å¿ƒè·¯ç”±åº“ï¼ˆå·²å­˜åœ¨å¹¶æˆåŠŸæ„å»ºï¼‰
- âœ… `@ldesign/router-vue` - Vue 3 è·¯ç”±é€‚é…ï¼ˆå·²å­˜åœ¨ï¼‰
- âœ… `@ldesign/router-react` - React è·¯ç”±é€‚é…ï¼ˆå·²å­˜åœ¨ï¼‰
- âœ… `@ldesign/router-svelte` - Svelte è·¯ç”±é€‚é…ï¼ˆå·²å­˜åœ¨ï¼‰
- âœ… `@ldesign/router-solid` - Solid.js è·¯ç”±é€‚é…ï¼ˆå·²å­˜åœ¨ï¼‰
- âœ… `@ldesign/router-angular` - Angular è·¯ç”±é€‚é…ï¼ˆå·²å­˜åœ¨ï¼‰

### 2. æ–°åˆ›å»ºçš„æ¡†æ¶é€‚é…åŒ…
å·²ä¸ºä»¥ä¸‹æ¡†æ¶åˆ›å»ºå®Œæ•´çš„åŒ…ç»“æ„ï¼š

- âœ… `@ldesign/router-alpinejs` - Alpine.js è·¯ç”±é€‚é…
- âœ… `@ldesign/router-astro` - Astro è·¯ç”±é€‚é…
- âœ… `@ldesign/router-lit` - Lit è·¯ç”±é€‚é…
- âœ… `@ldesign/router-nextjs` - Next.js è·¯ç”±é€‚é…
- âœ… `@ldesign/router-nuxtjs` - Nuxt.js è·¯ç”±é€‚é…
- âœ… `@ldesign/router-preact` - Preact è·¯ç”±é€‚é…
- âœ… `@ldesign/router-qwik` - Qwik è·¯ç”±é€‚é…
- âœ… `@ldesign/router-remix` - Remix è·¯ç”±é€‚é…
- âœ… `@ldesign/router-sveltekit` - SvelteKit è·¯ç”±é€‚é…

### 3. æ¯ä¸ªæ–°åŒ…å·²åŒ…å«çš„æ–‡ä»¶

#### é…ç½®æ–‡ä»¶
- âœ… `package.json` - åŒ…é…ç½®
- âœ… `tsconfig.json` - TypeScript é…ç½®
- âœ… `eslint.config.js` - ESLint é…ç½®ï¼ˆ@antfu/eslint-configï¼‰
- âœ… `ldesign.config.ts` - æ„å»ºé…ç½®ï¼ˆä½¿ç”¨ @ldesign/builderï¼‰
- âœ… `vitest.config.ts` - æµ‹è¯•é…ç½®
- âœ… `README.md` - åŒ…æ–‡æ¡£

#### æºä»£ç 
- âœ… `src/index.ts` - ä¸»å…¥å£æ–‡ä»¶
- âœ… `src/router.ts` - è·¯ç”±å™¨å®ç°
- âœ… `src/directives/index.ts` - æŒ‡ä»¤ï¼ˆä»… Alpine.jsï¼‰

#### æµ‹è¯•æ–‡ä»¶
- âœ… `__tests__/router.test.ts` - å•å…ƒæµ‹è¯•
- âœ… `__tests__/performance.test.ts` - æ€§èƒ½æµ‹è¯•
- âœ… `e2e/basic.test.ts` - E2E æµ‹è¯•åŸºç¡€ç»“æ„

### 4. æ„å»ºå’Œæ‰“åŒ…é…ç½®
- âœ… æ‰€æœ‰åŒ…é…ç½®äº† @ldesign/builder è¿›è¡Œæ‰“åŒ…
- âœ… æ”¯æŒ ESMã€CJSã€UMD ä¸‰ç§è¾“å‡ºæ ¼å¼
- âœ… è‡ªåŠ¨ç”Ÿæˆ TypeScript å£°æ˜æ–‡ä»¶
- âœ… ç”Ÿæˆ Source Map

### 5. ä¾èµ–ç®¡ç†
- âœ… ä½¿ç”¨ pnpm workspace ç®¡ç† monorepo
- âœ… æ‰€æœ‰åŒ…æ­£ç¡®å¼•ç”¨ @ldesign/router-core
- âœ… ä¾èµ–å·²å®‰è£…ï¼ˆä½¿ç”¨ `pnpm install --ignore-scripts`ï¼‰

### 6. è‡ªåŠ¨åŒ–è„šæœ¬
åˆ›å»ºäº†å¤šä¸ª PowerShell è„šæœ¬ç”¨äºæ‰¹é‡æ“ä½œï¼š
- âœ… `scripts/generate-packages.ps1` - æ‰¹é‡ç”ŸæˆåŒ…ç»“æ„
- âœ… `scripts/generate-test-configs.ps1` - æ‰¹é‡ç”Ÿæˆæµ‹è¯•é…ç½®
- âœ… `scripts/fix-all-lint.ps1` - æ‰¹é‡ä¿®å¤ lint é”™è¯¯

## ğŸ”„ è¿›è¡Œä¸­/éœ€è¦å®Œå–„çš„ä»»åŠ¡

### 1. TypeScript ç±»å‹å®Œå–„
**å½“å‰çŠ¶æ€**ï¼šåŸºç¡€ç±»å‹å·²å®šä¹‰ï¼Œä½†éœ€è¦å®Œå–„
**å¾…åŠ**ï¼š
- ä¿®å¤æ‰€æœ‰åŒ…ä¸­çš„ TypeScript ç±»å‹é”™è¯¯
- å®Œå–„ `NavigationInformation` ç­‰æ ¸å¿ƒç±»å‹çš„å¯¼å‡º
- ç¡®ä¿æ‰€æœ‰åŒ…çš„ç±»å‹å®šä¹‰å®Œæ•´ä¸”å‡†ç¡®

**ä¿®å¤æ–¹æ³•**ï¼š
```powershell
# ä¸ºæ‰€æœ‰æ–°åŒ…æ·»åŠ å®Œæ•´çš„ç±»å‹å®šä¹‰
# éœ€è¦åœ¨ router.ts ä¸­æ­£ç¡®å¯¼å…¥å’Œä½¿ç”¨ NavigationInformation ç±»å‹
```

### 2. ESLint é…ç½®ä¼˜åŒ–
**å½“å‰çŠ¶æ€**ï¼šé…ç½®å·²æ·»åŠ ï¼Œä½†å­˜åœ¨ç‰ˆæœ¬å…¼å®¹é—®é¢˜
**é—®é¢˜**ï¼š
- ESLint 9.18.0 ä¸ eslint-plugin-unicorn å­˜åœ¨å…¼å®¹æ€§é—®é¢˜
- éœ€è¦å‡çº§æˆ–é™çº§ç›¸å…³ä¾èµ–

**å»ºè®®æ–¹æ¡ˆ**ï¼š
1. å‡çº§åˆ°æœ€æ–°çš„ @antfu/eslint-config
2. æˆ–è€…é™çº§ ESLint åˆ° 9.10.x ç‰ˆæœ¬
3. æˆ–è€…ç¦ç”¨ unicorn æ’ä»¶ä¸­æœ‰é—®é¢˜çš„è§„åˆ™

### 3. æ¡†æ¶ç‰¹å®šåŠŸèƒ½å®ç°
**å½“å‰çŠ¶æ€**ï¼šæ‰€æœ‰åŒ…åªæœ‰åŸºç¡€è·¯ç”±å™¨å®ç°
**å¾…å®Œå–„**ï¼š

#### æ¯ä¸ªæ¡†æ¶éœ€è¦æ·»åŠ ï¼š

**React / Preact / Remixï¼š**
- Hooks: `useRouter`, `useRoute`, `useParams`, `useQuery`
- Components: `Link`, `Route`, `Routes`

**Vue / Nuxtï¼š**
- Composables: `useRouter`, `useRoute`, `useParams`
- Components: `RouterView`, `RouterLink`
- æ’ä»¶: Vue plugin å°è£…

**Svelte / SvelteKitï¼š**
- Stores: `$page`, `$navigating`
- Components: `Router`, `Route`, `Link`

**Alpine.jsï¼š**
- Directives: `x-route`, `x-link`, `x-params`
- é­”æ³•å±æ€§: `$router`, `$route`

**Litï¼š**
- Decorators: `@route`, `@routeParam`
- Components: Web Components è·¯ç”±ç»„ä»¶

**Astroï¼š**
- Integration: Astro é›†æˆæ’ä»¶
- Components: Astro ç»„ä»¶

**Next.jsï¼š**
- å¢å¼º next/navigation åŠŸèƒ½
- App Router å’Œ Pages Router æ”¯æŒ

**Qwikï¼š**
- QwikCity é›†æˆ
- ä¼˜åŒ–è·¯ç”±åŠ è½½ç­–ç•¥

**Solidï¼š**
- Solid Router é›†æˆ
- createSignal é›†æˆ

### 4. æµ‹è¯•å®Œå–„
**å½“å‰çŠ¶æ€**ï¼šåŸºç¡€æµ‹è¯•ç»“æ„å·²åˆ›å»º
**å¾…å®Œå–„**ï¼š
- ç¼–å†™æ›´å…¨é¢çš„å•å…ƒæµ‹è¯•
- å®Œå–„ E2E æµ‹è¯•ï¼ˆéœ€è¦æ¯ä¸ªæ¡†æ¶çš„æµ‹è¯•ç¯å¢ƒï¼‰
- æ€§èƒ½æµ‹è¯•éœ€è¦æ›´å®é™…çš„åœºæ™¯
- æ·»åŠ é›†æˆæµ‹è¯•

### 5. æ–‡æ¡£å®Œå–„
**å½“å‰çŠ¶æ€**ï¼šæ¯ä¸ªåŒ…æœ‰åŸºç¡€ README
**å¾…å®Œå–„**ï¼š
- è¯¦ç»†çš„ API æ–‡æ¡£
- ä½¿ç”¨ç¤ºä¾‹å’Œæœ€ä½³å®è·µ
- è¿ç§»æŒ‡å—
- æ€§èƒ½ä¼˜åŒ–å»ºè®®

## ğŸ“‹ å¾…å®Œæˆä»»åŠ¡

### 1. ç¤ºä¾‹é¡¹ç›®ï¼ˆä¼˜å…ˆçº§ï¼šé«˜ï¼‰
ä¸ºæ¯ä¸ªæ¡†æ¶åˆ›å»ºåŸºäº @ldesign/launcher çš„ç¤ºä¾‹é¡¹ç›®ï¼š

```
packages/router/examples/
â”œâ”€â”€ alpinejs-example/
â”œâ”€â”€ astro-example/
â”œâ”€â”€ lit-example/
â”œâ”€â”€ nextjs-example/
â”œâ”€â”€ nuxtjs-example/
â”œâ”€â”€ preact-example/
â”œâ”€â”€ qwik-example/
â”œâ”€â”€ remix-example/
â””â”€â”€ sveltekit-example/
```

æ¯ä¸ªç¤ºä¾‹åº”åŒ…å«ï¼š
- åŸºç¡€è·¯ç”±é…ç½®
- è·¯ç”±å¯¼èˆª
- è·¯ç”±å‚æ•°
- åµŒå¥—è·¯ç”±
- è·¯ç”±å®ˆå«
- æ‡’åŠ è½½

### 2. æ„å»ºéªŒè¯
- éªŒè¯æ‰€æœ‰åŒ…éƒ½èƒ½æˆåŠŸæ„å»º
- ç¡®ä¿äº§ç‰©ç¬¦åˆè§„èŒƒï¼ˆESM/CJS/UMDï¼‰
- éªŒè¯ TypeScript å£°æ˜æ–‡ä»¶æ­£ç¡®
- è¿›è¡Œ tree-shaking æµ‹è¯•

### 3. å‘å¸ƒå‡†å¤‡
- å®Œå–„ CHANGELOG.md
- ç¡®ä¿æ‰€æœ‰è®¸å¯è¯æ–‡ä»¶å­˜åœ¨
- é…ç½® GitHub Actions CI/CD
- è®¾ç½® npm å‘å¸ƒæµç¨‹

## ğŸ“Š åŒ…çš„ç»Ÿè®¡ä¿¡æ¯

### æ€»ä½“æƒ…å†µ
- **æ€»åŒ…æ•°**: 15 ä¸ªï¼ˆ6 ä¸ªå·²å­˜åœ¨ + 9 ä¸ªæ–°åˆ›å»ºï¼‰
- **æ ¸å¿ƒåŒ…**: 1 ä¸ªï¼ˆ@ldesign/router-coreï¼‰
- **æ¡†æ¶é€‚é…åŒ…**: 14 ä¸ª

### ä»£ç ç»Ÿè®¡ï¼ˆæ–°åˆ›å»ºçš„åŒ…ï¼‰
- **é…ç½®æ–‡ä»¶**: 54 ä¸ªï¼ˆæ¯åŒ… 6 ä¸ªï¼‰
- **æºæ–‡ä»¶**: 27 ä¸ªï¼ˆæ¯åŒ… 3 ä¸ªï¼‰
- **æµ‹è¯•æ–‡ä»¶**: 27 ä¸ªï¼ˆæ¯åŒ… 3 ä¸ªï¼‰
- **è„šæœ¬æ–‡ä»¶**: 3 ä¸ªï¼ˆè‡ªåŠ¨åŒ–è„šæœ¬ï¼‰

## ğŸš€ ä¸‹ä¸€æ­¥è¡ŒåŠ¨

### ç«‹å³éœ€è¦åšçš„ï¼ˆæŒ‰ä¼˜å…ˆçº§ï¼‰

1. **ä¿®å¤ç±»å‹é”™è¯¯** (ä¼˜å…ˆçº§: ğŸ”¥ æœ€é«˜)
   ```bash
   # éœ€è¦ä¸ºæ‰€æœ‰æ–°åŒ…çš„ router.ts æ·»åŠ æ­£ç¡®çš„ç±»å‹å¯¼å…¥
   cd packages/alpinejs
   # ä¿®æ”¹ src/router.tsï¼Œæ­£ç¡®å¯¼å…¥ NavigationInformation
   # é‡å¤æ­¤è¿‡ç¨‹foræ‰€æœ‰æ–°åŒ…
   ```

2. **éªŒè¯æ„å»º** (ä¼˜å…ˆçº§: ğŸ”¥ æœ€é«˜)
   ```bash
   # æ„å»ºæ‰€æœ‰åŒ…
   pnpm -r --filter "@ldesign/router-*" build
   
   # æˆ–é€ä¸ªæ„å»º
   cd packages/alpinejs && pnpm build
   cd packages/astro && pnpm build
   # ...
   ```

3. **åˆ›å»ºç¤ºä¾‹é¡¹ç›®** (ä¼˜å…ˆçº§: â­ é«˜)
   - å…ˆä¸º 1-2 ä¸ªæ¡†æ¶åˆ›å»ºå®Œæ•´ç¤ºä¾‹
   - éªŒè¯æ•´ä¸ªæµç¨‹
   - ç„¶åæ‰¹é‡åˆ›å»ºå…¶ä»–æ¡†æ¶çš„ç¤ºä¾‹

4. **å®Œå–„æ¡†æ¶ç‰¹å®šåŠŸèƒ½** (ä¼˜å…ˆçº§: â­ é«˜)
   - æ¯ä¸ªæ¡†æ¶æ·»åŠ å¯¹åº”çš„ hooks/composables/directives
   - å‚è€ƒç°æœ‰çš„ vue/react åŒ…çš„å®ç°

5. **æ–‡æ¡£å®Œå–„** (ä¼˜å…ˆçº§: âš ï¸ ä¸­)
   - ä¸ºæ¯ä¸ªåŒ…ç¼–å†™è¯¦ç»†çš„ API æ–‡æ¡£
   - æ·»åŠ ä½¿ç”¨ç¤ºä¾‹

6. **æµ‹è¯•å®Œå–„** (ä¼˜å…ˆçº§: âš ï¸ ä¸­)
   - è¿è¡Œç°æœ‰æµ‹è¯•
   - æ·»åŠ æ›´å¤šæµ‹è¯•ç”¨ä¾‹

## ğŸ’¡ å»ºè®®å’Œæ³¨æ„äº‹é¡¹

### æ„å»ºé¡ºåº
1. å…ˆæ„å»º `@ldesign/router-core` âœ…ï¼ˆå·²å®Œæˆï¼‰
2. å†æ„å»ºå…¶ä»–æ¡†æ¶é€‚é…åŒ…
3. æœ€åæ„å»ºç¤ºä¾‹é¡¹ç›®

### ç±»å‹å®‰å…¨
- ç¡®ä¿æ‰€æœ‰å¯¼å‡ºéƒ½æœ‰å®Œæ•´çš„ç±»å‹å®šä¹‰
- ä½¿ç”¨ `tsc --noEmit` éªŒè¯ç±»å‹
- åœ¨ CI ä¸­å¼ºåˆ¶ç±»å‹æ£€æŸ¥

### æ€§èƒ½ä¼˜åŒ–
- ä½¿ç”¨ tree-shaking å‹å¥½çš„å¯¼å‡ºæ–¹å¼
- æ‡’åŠ è½½éæ ¸å¿ƒåŠŸèƒ½
- ä¼˜åŒ–åŒ…å¤§å°ï¼ˆç›®æ ‡ï¼šæ ¸å¿ƒåŒ… < 20KB gzippedï¼‰

### ç‰ˆæœ¬ç®¡ç†
- ä½¿ç”¨ç»Ÿä¸€çš„ç‰ˆæœ¬å·ç­–ç•¥
- è€ƒè™‘ä½¿ç”¨ changesets ç®¡ç†ç‰ˆæœ¬
- ä¿æŒæ ¸å¿ƒåŒ…å’Œé€‚é…åŒ…çš„ç‰ˆæœ¬å…¼å®¹æ€§

## ğŸ“ è”ç³»å’Œåä½œ

å¦‚éœ€ç»§ç»­å®Œå–„æ­¤é¡¹ç›®ï¼Œå»ºè®®æŒ‰ç…§ä¸Šè¿°ä¼˜å…ˆçº§é€æ­¥è¿›è¡Œã€‚æ ¸å¿ƒä»»åŠ¡æ˜¯ï¼š

1. ä¿®å¤æ‰€æœ‰ TypeScript ç±»å‹é”™è¯¯
2. å®Œæˆæ‰€æœ‰åŒ…çš„æ„å»º
3. åˆ›å»ºè‡³å°‘ 2-3 ä¸ªå®Œæ•´çš„ç¤ºä¾‹é¡¹ç›®
4. éªŒè¯æ•´ä¸ªç³»ç»Ÿèƒ½å¤Ÿæ­£å¸¸è¿è¡Œ

---

**é¡¹ç›®åˆ›å»ºæ—¥æœŸ**: 2025-10-29
**æœ€åæ›´æ–°**: 2025-10-29
**å½“å‰çŠ¶æ€**: åŸºç¡€æ¶æ„å®Œæˆï¼Œéœ€è¦è¿›ä¸€æ­¥å®Œå–„
