{"version":3,"file":"index.js","sources":["../../src/micro-frontend/index.ts"],"sourcesContent":[null],"names":["MicroFrontendRouter","constructor","config","apps","Map","appStates","activeApps","Set","eventBus","mitt","router","appContainers","appScripts","appStyles","globalState","reactive","stateWatchers","registerApps","forEach","app","registerApp","set","name","loading","mounted","error","prefetch","prefetchApp","unregisterApp","get","has","unmountApp","delete","start","setupRouterIntegration","listenRouteChange","reroute","route","path","getAppPath","component","setup","container","ref","watch","el","mountApp","render","h","id","class","meta","microApp","addRoute","activeRule","afterEach","_to","window","addEventListener","currentApps","getActiveApps","toMount","toUnmount","add","location","isAppActive","pathname","startsWith","RegExp","test","state","loader","lifeCycles","beforeMount","loadApp","appContainer","createContainer","sandbox","createSandbox","doMount","afterMount","emit","beforeUnmount","doUnmount","innerHTML","destroySandbox","afterUnmount","entry","response","fetch","html","text","parseHTML","parser","DOMParser","doc","parseFromString","scripts","Array","from","querySelectorAll","scriptElements","script","scriptEl","document","createElement","src","textContent","push","styles","links","styleElements","style","styleEl","link","href","querySelector","replace","body","appendChild","_app","_applySandboxStyles","scopeCSS","remove","css","scope","scopeClass","match","selector","trim","scopedSelector","split","map","s","join","classList","head","newScript","props","console","warn","sendMessage","target","message","targets","isArray","appName","onMessage","handler","on","off","setGlobalState","key","value","watchers","watcher","getGlobalState","watchGlobalState","index","indexOf","splice","navigateToApp","Error","basePath","fullPath","history","pushState","getAppState","getApps","values","getActiveAppNames","event","destroy","clear","all","MicroFrontendPlugin","install","options","microRouter","globalProperties","$microRouter","provide","mixin","$options","$router","useMicroFrontend","inject","bind"],"mappings":"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"}