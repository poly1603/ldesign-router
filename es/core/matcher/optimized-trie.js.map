{"version":3,"file":"optimized-trie.js","sources":["../../../src/core/matcher/optimized-trie.ts"],"sourcesContent":[null],"names":["FLAG_HAS_CHILDREN","FLAG_HAS_PARAM","FLAG_HAS_WILDCARD","FLAG_IS_OPTIONAL","FLAG_HAS_RECORD","FLAG_HAS_DEFAULT","OptimizedTrieNode","constructor","flags","stats","Uint16Array","hasChildren","children","data","Map","paramChild","child","paramName","name","wildcardChild","record","defaultChild","isOptional","value","weight","Math","min","accessCount","compact","size","Object","keys","length","getMemorySize","StringPool","pool","maxSize","intern","str","interned","get","keysToDelete","Array","from","slice","forEach","key","delete","set","clear","getSize","PathBuilder","segments","cached","add","segment","push","addAll","toString","filter","Boolean","join","getSegments","ObjectPool","factory","reset","initialSize","inUse","WeakSet","i","acquire","obj","pop","release","has","console","warn","getPoolSize","MemoryMonitor","measurements","maxMeasurements","measure","memory","performance","usedJSHeapSize","timestamp","Date","now","shift","getStats","current","average","peak","trend","memories","map","m","reduce","a","b","max","recent","firstHalf","secondHalf","firstAvg","secondAvg"],"mappings":"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"}