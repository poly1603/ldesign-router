{"version":3,"file":"index.js","sources":["../../src/ab-testing/index.ts"],"sourcesContent":[null],"names":["ABTestManager","constructor","options","experiments","Map","userVariants","results","router","analytics","userId","generateUserId","storage","localStorage","loadExperiments","loadUserVariants","initRouter","setupRouterIntegration","beforeEach","to","_from","next","experiment","getExperimentForRoute","path","status","variant","selectVariant","route","recordImpression","id","createExperiment","config","nanoid","totalWeight","variants","reduce","sum","v","weight","Math","abs","Error","set","saveExperiments","setupExperimentRoutes","updateExperiment","updates","get","Object","assign","startExperiment","stopExperiment","deleteExperiment","delete","startDate","Date","track","experimentId","experimentName","name","endDate","removeExperimentRoutes","forEach","component","routePath","undefined","props","meta","abTest","variantId","addRoute","routeName","removeRoute","matchesTargeting","sampleSize","hash","hashString","userVariantMap","assignVariant","saveUserVariants","find","random","cumulative","targeting","include","exclude","customRules","length","matches","some","segment","matchesSegment","user","getCurrentUser","every","rule","type","isNewUser","matchesLocation","value","operator","matchesDevice","matchesCustomSegment","firstVisit","getItem","setItem","now","toString","daysSinceFirstVisit","Number","parseInt","userLocation","getUserLocation","includes","_operator","userAgent","navigator","toLowerCase","test","_value","result","timestamp","goals","has","push","recordConversion","goalId","lastResult","achieved","getExperimentStats","stats","impressions","conversions","conversionRate","avgValue","confidence","variantStats","totalValue","goal","calculateConfidence","allStats","control","Array","from","values","s","p1","p2","n1","n2","pooledP","se","sqrt","z","targetRoute","isNew","device","getDevice","location","str","i","char","charCodeAt","data","JSON","stringify","parse","exp","error","console","fromEntries","entries","getExperiments","exportResults","allData","GoogleAnalyticsAdapter","event","properties","gtag","ABTestPlugin","install","app","globalProperties","$abTest","provide","mixin","mounted","$options","$router","useABTest","inject","currentExperiments","computed","filter","bind"],"mappings":"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"}